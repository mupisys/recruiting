<div class="flex justify-between items-center mb-6">
  <h2 class="text-xl font-bold text-primary">Alterar Senha - {{ target_user.username }}</h2>
  <button class="text-secondary hover:text-primary transition-colors" @click="$dispatch('modal-close')">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
  </button>
</div>

<form hx-post="{% url 'user_change_password' target_user.pk %}"
      hx-target="#modal-content"
      hx-swap="innerHTML"
      class="space-y-6">
  {% csrf_token %}
  <div class="space-y-4">
    <div class="space-y-2">
      <label for="id_new_password1" class="block text-sm font-medium text-secondary">Nova Senha</label>
      {{ form.new_password1 }}
      {% if form.new_password1.errors %}<p class="text-red-500 text-xs mt-1">{{ form.new_password1.errors.0 }}</p>{% endif %}
    </div>
    <div class="space-y-2">
      <label for="id_new_password2" class="block text-sm font-medium text-secondary">Confirmar Nova Senha</label>
      {{ form.new_password2 }}
      {% if form.new_password2.errors %}<p class="text-red-500 text-xs mt-1">{{ form.new_password2.errors.0 }}</p>{% endif %}
    </div>
    {% if form.non_field_errors %}
      <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/50 p-3 rounded-md">
        <p class="text-red-600 dark:text-red-200 text-sm">{{ form.non_field_errors.0 }}</p>
      </div>
    {% endif %}
  </div>
  
  <div class="flex justify-end gap-3 pt-4 border-t border-border mt-6">
    <button type="button" 
            class="btn btn-secondary"
            @click="$dispatch('modal-close')">Cancelar</button>
    <button type="submit"
            class="btn btn-primary">Alterar Senha</button>
  </div>
</form>

<script>
  (function() {
    const modalContent = document.getElementById('modal-content');
    if (modalContent) {
      const inputs = modalContent.querySelectorAll('input');
      inputs.forEach(input => input.classList.add('input'));
    }
  })();
</script>
