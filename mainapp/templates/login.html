{% extends 'base.html' %}

{% block title %}Entrar - Mupi Recruiting{% endblock %}

{% block content %}
<!-- Dashboard-style Header (Simplified) -->
<header class="relative z-30 pt-8 pb-4">
  
  <div class="container mx-auto px-4">
    <div class="flex flex-col items-center md:flex-row md:items-center justify-between gap-6">
      <!-- Brand Identity -->
      <div class="flex items-center gap-4">
        <div class="text-center md:text-left">
          <h1 class="font-display text-2xl font-bold text-primary leading-tight">Dance Studio</h1>
          <p class="text-secondary text-sm font-medium">Map Creator</p>
        </div>
      </div>
      
      <!-- Actions: Back to Site (Contextual) -->
      <nav class="flex items-center gap-4 bg-surface/50 backdrop-blur-sm p-2 pr-4 pl-4 rounded-full border border-border shadow-sm md:self-auto">
        <a href="{% url 'landpage' %}" class="text-xs font-medium text-secondary hover:text-primary hover:scale-105 active:scale-95 transition-all duration-200 ease-out-back inline-block">Voltar ao Site</a>
      </nav>
    </div>
  </div>
</header>

<div class="flex-grow flex items-center justify-center p-4">
  <div class="w-full max-w-md">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold tracking-tight text-primary mb-2">Entrar</h1>
      <p class="text-secondary text-sm">Acesse o painel administrativo</p>
    </div>

    <div class="card">
      {% if form.errors %}
        <script>
          window.addEventListener('DOMContentLoaded', function() {
            window.dispatchEvent(new CustomEvent('toast-add', { detail: { level: 'error', message: 'Usuário ou senha inválidos.' } }));
          });
        </script>
      {% endif %}

      <form method="post" class="space-y-6" data-toast-validate>
        {% csrf_token %}
        
        <div class="space-y-2">
          <label for="id_login" class="block text-sm font-medium text-secondary">Usuário</label>
          {{ form.login }}
        </div>
        
        <div class="space-y-2">
          <label for="id_password" class="block text-sm font-medium text-secondary">Senha</label>
          {{ form.password }}
        </div>

        {% if redirect_field_value %}
          <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
        {% endif %}

        <button type="submit" class="btn btn-primary w-full">
          Entrar
        </button>
      </form>

      <div class="mt-6 flex flex-col gap-3 text-center text-sm">
        <a href="{% url 'account_reset_password' %}" 
           hx-get="{% url 'account_reset_password' %}" 
           hx-target="#modal-content" 
           hx-swap="innerHTML" 
           class="link">
          Esqueci minha senha
        </a>
        <a href="{% url 'account_signup' %}" 
           hx-get="{% url 'account_signup' %}" 
           hx-target="#modal-content" 
           hx-swap="innerHTML" 
           class="link">
          Criar conta
        </a>
      </div>
    </div>
  </div>
</div>

{% endblock %}
